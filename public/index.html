<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles/style.css" />
    <title>ReuniteAI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <script src="https://kit.fontawesome.com/cdfe75faaa.js" crossorigin="anonymous"></script>
    <script
      async
      crossorigin="anonymous"
      data-clerk-publishable-key="pk_test_d2l0dHktbWluay0zNy5jbGVyay5hY2NvdW50cy5kZXYk"
      src="https://witty-mink-37.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
      type="text/javascript"
    ></script>
  </head>

  <body>
    <header>
      <nav class="navbar">
        <div class="nav-section nav-left">
          <div class="logo">
            <a href="/">ReuniteAI</a>
          </div>
        </div>
        <div class="nav-section nav-center">
          <a href="#">How It Works</a>
          <a href="#">About</a>
          <a href="#">Check Report Status</a>
        </div>
        
        <div id="signed-out-nav" class="nav-section nav-right" style="display: none;">
          <a href="#" id="login-button" class="nav-auth">Log in</a>
          <a href="#" id="signup-button" class="nav-auth outlined">Sign up</a>
        </div>

        <div id="signed-in-nav" class="nav-section nav-right" style="display: none; align-items: center; gap: 16px;">
          <a href="./dashboard.html" class="nav-auth outlined">My Dashboard</a>
          <div id="user-button"></div>
        </div>

      </nav>
    </header>

    <main>
      <section class="hero">
        <p class="hero-subheading">üéØ AI-powered University Lost & Found</p>
        <h1 class="hero-heading">
          Lost something? Found something?<br />
          <span>ReuniteAI</span> uses AI to reconnect you with your lost items.
        </h1>
        <p class="hero-description">
          Fast, reliable, and secure recovery powered by smart search and
          verification. Get back what matters, effortlessly.
        </p>

        <section class="quick-report">
          <h2 class="qr-title">Quick Report</h2>
          <p class="qr-subtitle">
            Report a lost or found item in just a few clicks.
          </p>

          <div class="qr-actions">
            <a href="./report-lost.html" class="qr-button lost">
              <i class="fa-solid fa-magnifying-glass icon"></i>
              <span>I lost something</span>
            </a>

            <a href="./report-found.html" class="qr-button found">
              <i class="fa-solid fa-box-open icon"></i>
              <span>I found something</span>
            </a>
          </div>
        </section>
      </section>
    </main>

    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <h3>ReuniteAI</h3>
          <p>Helping students get back what matters!.</p>
        </div>

        <div class="footer-links">
          <a href="#">Help Center</a>
          <a href="#">Contact</a>
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2025 ReuniteAI. All rights reserved.</p>
        <p>Built with ‚ù§Ô∏è for students by ReuniteAI.</p>
      </div>
    </footer>
    <script>
      window.addEventListener('load', async function () {
        const Clerk = window.Clerk;

        try {
          await Clerk.load();
          console.log("Clerk is loaded and ready!");

          const userButtonDiv = document.getElementById('user-button');
          const signedInNav = document.getElementById('signed-in-nav');
          const signedOutNav = document.getElementById('signed-out-nav');
          const loginButton = document.getElementById('login-button');
          const signupButton = document.getElementById('signup-button');

          function updateNav() {
            if (Clerk.user) {
              signedOutNav.style.display = 'none';
              signedInNav.style.display = 'flex';
              if (!userButtonDiv.hasChildNodes()) {
                Clerk.mountUserButton(userButtonDiv);
              }
            } else {
              signedInNav.style.display = 'none';
              signedOutNav.style.display = 'flex';
            }
          }

          updateNav();

          Clerk.addListener(({ user }) => {
            console.log("auth state change, updating UI")
            updateNav();
          });

          loginButton.addEventListener('click', (e) => {
            e.preventDefault();
            Clerk.openSignIn();
          });
          signupButton.addEventListener('click', (e) => {
            e.preventDefault();
            Clerk.openSignUp();
          });

        } catch (err) {
          console.error('Clerk failed to load', err);
        }
      });

    </script>
  </body>
</html>

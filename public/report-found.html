<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ReuniteAI — Report Found Items</title>
  <link rel="stylesheet" href="./styles/style.css" />
  <link rel="stylesheet" href="./styles/report.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://kit.fontawesome.com/cdfe75faaa.js" crossorigin="anonymous"></script>
</head>

<body>
  <header>
    <nav class="navbar">
      <div class="nav-section nav-left">
        <div class="logo">
          <a href="./index.html">ReuniteAI</a>
        </div>
      </div>
      <div class="nav-section nav-center">
        <a href="#">How It Works</a>
        <a href="#">About</a>
        <a href="#">Check Report Status</a>
      </div>
      <div class="nav-section nav-right">
        <a href="#" class="nav-auth">Log in</a>
        <a href="#" class="nav-auth outlined">Sign up</a>
      </div>
    </nav>
  </header>

  <main>
    <section class="report-section">
      <h1 class="report-title">Found someone's item?</h1>
      <p class="report-subtitle">
        Help reunite them with it by reporting what you found.
      </p>

      <form id="" class="report-form">
        <div class="form-group">
          <label for="item-image">Upload a Photo of the Found item</label>
          <input type="file" id="item-image" accept="image/*" required aria-label="Upload photo of the found item" />
          <div id="image-preview" class="image-preview"></div>
        </div>

        <div class="form-group">
          <label for="item-description">Describe the item</label>
          <textarea id="item-description" placeholder="e.g., Red backpack, library, zipper broken" required
            aria-label="Description of found item"></textarea>
        </div>

        <div class="form-group">
          <label for="university-name">University</label>
          <input type="text" id="university-name" value="Federal University of Technology, Akure" readonly disabled
            aria-label="University name" />
          <input type="hidden" name="university" value="Federal University of Technology, Akure" />
        </div>

        <div class="form-group">
          <label for="item-location">
            Where did you found it?
            <div class="info-container">
              <i class="fa-solid fa-circle-info"></i>
              <span class="info-text">
                We try to detect the name of the place you click on, but it may not always be accurate. Feel free to correct it manually.
              </span>
            </div>
          </label>
          <p>Select on the map or type location manually</p>
          <div id="map"></div>
          <input type="text" name="custom-location"
            placeholder="E.g. LT1, Engineering Building, Obakekere, Malu Road" />
          <input type="hidden" name="lat" id="lat" />
          <input type="hidden" name="lng" id="lng" />
        </div>

        <div class="form-group">
          <label for="item-date">When did you find it?</label>
          <input type="date" id="item-date" required aria-label="Date the item was found" />
        </div>

        <button type="submit" class="submit-button">
          Submit Found Item Report
        </button>
      </form>

      <div id="successMessage" class="success-message" style="display: none">
        <p>
          Thanks! We’ve received your report. Our AI is now searching for apossible match with any missing item. We’ll notify you if there's a Match.
        </p>
        <a href="./index.html" class="back-button">Back to Home</a>
      </div>
    </section>
  </main>
</body>
<script src="./scripts/map.js"></script>
<script>
  const imageInput = document.getElementById("item-image");
  const previewImage = document.getElementById("image-preview");

  imageInput.addEventListener("change", () => {
    previewImage.innerHTML = "";

    const file = imageInput.files[0];
    if (file && file.type.startsWith("image/")) {
      const reader = new FileReader();

      reader.onload = function (e) {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.alt = "uploaded image preview";
        img.style.maxWidth = "100%";
        img.style.marginTop = "10px";
        previewImage.appendChild(img);
      };

      reader.readAsDataURL(file);
    }
  });
</script>
</html>